#include <iostream>
#include <string>
#include <algorithm>
using namespace std;
int pallimaker(string &s1){
    int size=s1.length();
    int mid=size/2;//from last
    int anchor=mid;
    int flag=0;
    
    
    if(size%2==0){
       // mid2=mid+1;
       mid--;
         cout<<"even size detected"<<endl;
        while(flag==0){
            cout<<"while loop begin"<<endl;
            /////////////////////////////////////////////////////
            string temp=s1.substr(0,mid);///string temp=s1.substr(mid+1,mid);
             reverse(temp.begin(),temp.end());// reverse(temp.begin(),temp.end());
             int revsize=temp.size();
            if(temp==s1.substr(mid+1,revsize)){     // if(s1.substr(0,mid)==temp){
                /////////////////////////////////////////////////////////////////////////////////////
                cout<<"partial palingdrome detected = "<<s1.substr(0,mid)<<"mid = "<<mid<<endl;
                flag=1;
                return 2*(anchor-mid-1)+1;
            }
              else if( s1.at(mid+1)==s1.at(mid)){
                  // mid++;
                string temp=s1.substr(mid+2,mid);
             reverse(temp.begin(),temp.end());
            if(s1.substr(0,mid)==temp){
                cout<<"partial palingdrome detected = "<<s1.substr(0,mid)<<"mid = "<<mid<<endl;
                flag=1;
               return 2*(anchor-mid-1);
            }
            }
               
            
          
            
            else if(mid==0){
                flag=1;
                cout<<"end of string reached"<<endl;
                return size-1;
            }
        mid--;
        
            
        }
    }
        
        
        
        
    
    
    
    
    ///////////////////////lenth is even 
    else {
        cout<<"odd size detected"<<endl;
        while(flag==0){
            cout<<"while loop begin"<<endl;
            string temp=s1.substr(mid+1,mid);
             reverse(temp.begin(),temp.end());
            if(s1.substr(0,mid)==temp){
                cout<<"partial palingdrome detected = "<<s1.substr(0,mid)<<"mid = "<<mid<<endl;
                flag=1;
                mid++;
            }
            
            else if(s1.at(mid)==s1.at(mid-1)){
                ////////////////////////////////////////////////
                string temp=s1.substr(0,mid-1);
             reverse(temp.begin(),temp.end());    
            if(s1.substr(mid+1,mid-1)==temp){      //
                //////////////////////////////////////////////////////////
                //  string temp=s1.substr(mid+1,mid-1);
           //  reverse(temp.begin(),temp.end());    
           // if(s1.substr(0,mid-1)==temp){   
                
                
                
                
                ////////////////////////////////////////////////////////////////
                cout<<"partial palingdrome detected = "<<s1.substr(0,mid)<<"mid = "<<mid<<endl;
                flag=1;
               return 2*(anchor-mid)+1;
            }
            }
                
            
            
            else if(mid==0){
                flag=1;
                cout<<"end of string reached"<<endl;
                return size-1;
            }
        mid--;
        
            
        }
    }
    cout<<"program terminated sucessfully"<<endl;
    
    return 2*(anchor-mid);
    
}

int main() {
	// your code goes here
	string s1="CBCD";
	cout<<pallimaker(s1);
	return 0;
}
